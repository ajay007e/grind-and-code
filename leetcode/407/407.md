# ðŸ§© 407: Trapping Rain Water II

- **Difficulty**: `Hard`
- **Tags / Topics**: `Array`, `Breadth-First Search`, `Heap (Priority Queue)`, `Matrix`
- **Link**: [Leetcode](https://leetcode.com/problems/trapping-rain-water-ii/)

---

## ðŸ“œ Description

<p>Given an <code>m x n</code> integer matrix <code>heightMap</code> representing the height of each unit cell in a 2D elevation map, return <em>the volume of water it can trap after raining</em>.</p>




## ðŸ§ª Examples

### Example 1
<pre>
<strong>Input:</strong> heightMap = [[1,4,3,1,3,2],[3,2,1,3,2,4],[2,3,3,2,3,1]]
<strong>Output:</strong> 4
<strong>Explanation:</strong> After the rain, water is trapped between the blocks.
We have two small ponds 1 and 3 units trapped.
The total volume of water trapped is 4.
</pre>


### Example 2
<pre>
<strong>Input:</strong> heightMap = [[3,3,3,3,3],[3,2,2,2,3],[3,2,1,2,3],[3,2,2,2,3],[3,3,3,3,3]]
<strong>Output:</strong> 10
</pre>




## ðŸ“Œ Constraints"
<ul>
	<li><code>m == heightMap.length</code></li>
	<li><code>n == heightMap[i].length</code></li>
	<li><code>1 &lt;= m, n &lt;= 200</code></li>
	<li><code>0 &lt;= heightMap[i][j] &lt;= 2 * 10<sup>4</sup></code></li>
</ul>



---
<!--- code section starts -->
## ðŸ§  Code



<details>
<summary>Click to read Python code</summary>

```python
class Solution:
    def trapRainWater(self, heightMap: List[List[int]]) -> int:
        n = len(heightMap)
        m = len(heightMap[0])

        h = []

        for i in range(n):
            for j in range(m):
                if i == 0 or j == 0 or i == n - 1 or j == m - 1:
                    heapq.heappush(h, (heightMap[i][j], i, j))
                    heightMap[i][j] = -1

        res = 0
        level = 0

        while h:
            height, i, j = heapq.heappop(h)
            level = max(level, height)
            for ni, nj in ((i + 1, j), (i - 1, j), (i, j + 1), (i, j - 1)):
                if ni < 0 or ni >= n or nj < 0 or nj >= m:
                    continue
                curr = heightMap[ni][nj]
                if curr == -1:
                    continue
                if level > curr:
                    res += level - curr
                heapq.heappush(h, (curr, ni, nj))
                heightMap[ni][nj] = -1
        return res

```

</details>
    

<!--- code section ends -->
